<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Innovation Leaderboard</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" type="image/png" href="assets/logo.png">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <img class="nav-icon" src="assets/logo.png" alt="Innovation Leaderboard">
                <span class="nav-title" onclick="showPage('home')" style="cursor: pointer;">Innovation Leaderboard</span>
            </div>
            <div class="nav-menu" id="navMenu">
                <a href="#" class="nav-link" data-page="home">Home</a>
                <a href="#" class="nav-link" data-page="dashboard" id="dashboardLink" style="display: none;">Dashboard</a>
                <button class="btn-auth" id="authBtn">Login / Register</button>
                <button class="btn-theme-toggle" id="themeToggle">ðŸŒ™</button>
                <div class="nav-user" id="navUser" style="display: none;">
                    <span id="userName"></span>
                    <button class="btn-logout" id="logoutBtn">Logout</button>
                </div>
            </div>
            <div class="nav-toggle" id="navToggle">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Home Page -->
        <div class="page" id="homePage">
            <div class="hero">
                <h1>Drive Innovation, Get Recognized</h1>
                <p class="hero-subtext">Submit your ideas, contribute to our success, and climb the leaderboard.</p>
                <p class="hero-tagline">Every idea counts.</p>
                <button class="btn-hero" id="submitIdeaHeroBtn">Submit an Idea</button>
            </div>

            <!-- Main Content Grid -->
            <div class="home-grid">
                <!-- Left Side: Leaderboard -->
                <div class="leaderboard-section">
                    <h2><img src="assets/top.png" alt="Top Performer" class="section-icon"> Top Performers</h2>
                    <div class="podium-container" id="podiumContainer">
                        <!-- Top 3 performers will be populated here -->
                    </div>
                    <div class="ranking-list" id="rankingList">
                        <!-- Remaining performers will be populated here -->
                    </div>
                </div>

                <!-- Right Side: Statistics Grid -->
                <div class="stats-section">
                    <div class="stats-grid" id="statsGrid">
                        <div class="stat-card">
                            <div class="stat-icon"><img src="assets/ideas.png" alt="Total Ideas"></div>
                            <div class="stat-content">
                                <div class="stat-number" id="totalIdeas">0</div>
                                <div class="stat-label">Total Ideas</div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon"><img src="assets/approved.png" alt="Approved Ideas"></div>
                            <div class="stat-content">
                                <div class="stat-number" id="approvedIdeas">0</div>
                                <div class="stat-label">Approved Ideas</div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon"><img src="assets/points.png" alt="Points Awarded"></div>
                            <div class="stat-content">
                                <div class="stat-number" id="totalPoints">0</div>
                                <div class="stat-label">Points Awarded</div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon"><img src="assets/contributors.png" alt="Active Contributors"></div>
                            <div class="stat-content">
                                <div class="stat-number" id="activeUsers">0</div>
                                <div class="stat-label">Active Contributors</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Bottom: Recent Activities -->
            <div class="section">
                <h2>ðŸ“ˆ Recent Activities</h2>
                <div class="activities-container" id="activitiesContainer">
                    <!-- Recent activities will be populated here -->
                </div>
            </div>
        </div>


        <!-- Dashboard Page -->
        <div class="page" id="dashboardPage" style="display: none;">
            <!-- Service Engineer Dashboard -->
            <div id="serviceDashboard" style="display: none;">
                <div class="dashboard-header">
                    <div class="welcome-section">
                        <img id="userAvatar" class="user-avatar" src="" alt="User Avatar">
                        <h1 id="welcomeMessage">Welcome!</h1>
                    </div>
                    <button class="btn-submit-idea" id="submitIdeaBtn" onclick="showIdeaSubmissionModal()">Submit New Idea</button>
                </div>
                
                <div class="dashboard-container">
                    <div class="dashboard-stats" id="userStatsGrid">
                        <!-- Stats will be populated here -->
                    </div>
                </div>

                <div class="dashboard-container">
                    <!-- My Ideas -->
                    <div class="section ideas-section">
                        <h2>My Ideas</h2>
                        <div class="ideas-container" id="myIdeasList">
                            <!-- User's ideas will be populated here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- SDM Dashboard -->
            <div id="sdmDashboard" style="display: none;">
                <div class="dashboard-header">
                    <div class="welcome-section">
                        <img id="userAvatarSDM" class="user-avatar" src="" alt="User Avatar">
                        <h1 id="welcomeMessageSDM">Welcome!</h1>
                    </div>
                </div>
                
                <div class="dashboard-container">
                    <div class="dashboard-stats" id="sdmStatsGrid">
                        <!-- Stats will be populated here -->
                    </div>
                </div>

                <div class="dashboard-container">
                    <!-- Pending Ideas for Review -->
                    <div class="section ideas-section">
                        <h2>Pending Ideas</h2>
                        <div class="ideas-container" id="worklistIdeas">
                            <!-- Pending ideas will be populated here -->
                        </div>
                    </div>

                    <!-- Approved Ideas -->
                    <div class="section ideas-section">
                        <h2>Approved Ideas</h2>
                        <div class="ideas-container" id="approvedIdeasList">
                            <!-- Approved ideas will be populated here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Modals -->
    <!-- Auth Modal -->
    <div class="modal" id="authModal">
        <div class="modal-content auth-modal-content">
            <div class="modal-header">
                <h3>Welcome to Innovation Hub</h3>
                <button class="modal-close" id="closeAuthModal">&times;</button>
            </div>
            <div class="auth-tabs">
                <button class="auth-tab active" data-tab="login">Login</button>
                <button class="auth-tab" data-tab="register">Register</button>
            </div>
            <div class="auth-forms">
                <!-- Login Form -->
                <div class="auth-form active" id="loginForm">
                    <form id="loginFormElement">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="loginUsername">Username</label>
                                <input type="text" id="loginUsername" name="username" required>
                            </div>
                            <div class="form-group">
                                <label for="loginPassword">Password</label>
                                <input type="password" id="loginPassword" name="password" required>
                            </div>
                        </div>
                        <button type="submit" class="btn-primary">Sign In</button>
                    </form>
                </div>
                <!-- Register Form -->
                <div class="auth-form" id="registerForm">
                    <form id="registerFormElement">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="registerUsername">Username</label>
                                <input type="text" id="registerUsername" name="username" required>
                            </div>
                            <div class="form-group">
                                <label for="registerDisplayName">Display Name</label>
                                <input type="text" id="registerDisplayName" name="display_name" required>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="registerEmail">Email</label>
                                <input type="email" id="registerEmail" name="email" required>
                            </div>
                            <div class="form-group">
                                <label for="registerPassword">Password</label>
                                <input type="password" id="registerPassword" name="password" required>
                            </div>
                        </div>
                        <div class="form-group role-inline">
                            <label>Role</label>
                            <div class="role-selector">
                                <label class="radio-label">
                                    <input type="radio" name="role" value="Service Engineer" checked>
                                    <span class="radio-text">Service Engineer</span>
                                </label>
                                <label class="radio-label">
                                    <input type="radio" name="role" value="SDM">
                                    <span class="radio-text">SDM (Service Delivery Manager)</span>
                                </label>
                            </div>
                        </div>
                        <button type="submit" class="btn-primary">Create Account</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Idea Submission Modal -->
    <div class="modal" id="ideaSubmissionModal">
        <div class="modal-content idea-modal-content">
            <div class="modal-header">
                <h3>Submit New Idea</h3>
                <button class="modal-close" id="closeIdeaModal">&times;</button>
            </div>
            <form id="ideaSubmissionForm">
                <div class="form-scrollable">
                    <div class="form-group">
                        <label for="ideaTitle">Idea Title</label>
                        <input type="text" id="ideaTitle" name="title" required placeholder="Enter a descriptive title for your idea">
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="ideaCategory">Category</label>
                            <select id="ideaCategory" name="category" required>
                                <option value="">Select Category</option>
                                <option value="Innovation">Innovation</option>
                                <option value="Automation">Automation</option>
                                <option value="Security">Security</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="ideaServiceArea">Service Area</label>
                            <select id="ideaServiceArea" name="service_area" required>
                                <option value="">Select Service Area</option>
                                <option value="AMS">AMS</option>
                                <option value="Infra">Infrastructure</option>
                                <option value="Security">Security</option>
                                <option value="Cloud">Cloud</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="benefitLevel">Benefit Level</label>
                    <div class="benefit-slider">
                        <input type="range" id="benefitLevel" name="benefit_level" min="1" max="5" value="3" required>
                        <div class="benefit-labels">
                            <span>Marginal</span>
                            <span>Moderate</span>
                            <span>High</span>
                            <span>Very High</span>
                            <span>Gamechanger</span>
                        </div>
                        <div class="benefit-value" id="benefitValue">High</div>
                    </div>
                </div>
                <div class="form-row">
                        <div class="form-group">
                            <label for="ideaAssignedSDM">Assign to SDM</label>
                            <select id="ideaAssignedSDM" name="assigned_sdm_id" required>
                                <option value="">Select SDM</option>
                                <!-- SDMs will be populated here -->
                            </select>
                        </div>
                        <div class="form-group checkbox-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="ideaImplemented" name="implemented" value="1">
                                Already Implemented
                            </label>
                        </div>
                    </div>
                
                <!-- Category-specific fields -->
                <div id="securityFields" style="display: none;">
                    <div class="form-group">
                        <label for="securityGap">Security Gap</label>
                        <textarea id="securityGap" name="security_gap" rows="3"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="possibleSolution">Possible Solution</label>
                        <textarea id="possibleSolution" name="possible_solution" rows="3"></textarea>
                    </div>
                </div>
                
                <div id="automationFields" style="display: none;">
                    <div class="form-group">
                        <label for="automationOpportunity">Automation Opportunity</label>
                        <textarea id="automationOpportunity" name="automation_opportunity" rows="3"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="automationSolution">Automation Solution</label>
                        <textarea id="automationSolution" name="automation_solution" rows="3"></textarea>
                    </div>
                </div>
                
                    <div id="innovationFields" style="display: none;">
                        <div class="form-group">
                            <label for="innovativeIdea">Innovative Idea</label>
                            <textarea id="innovativeIdea" name="innovative_idea" rows="3"></textarea>
                        </div>
                    </div>
                </div>
                
                <div class="modal-footer">
                    <button type="button" class="btn-secondary" id="cancelIdeaBtn">Cancel</button>
                    <button type="submit" class="btn-primary">Submit Idea</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Idea Details Modal -->
    <div class="modal" id="ideaDetailsModal">
        <div class="modal-content idea-details-modal-content">
            <div class="modal-header">
                <h3>Idea Details</h3>
                <button class="modal-close" id="closeIdeaDetailsModal">&times;</button>
            </div>
            <div id="ideaDetailsContent">
                <!-- Content will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Approval Confirmation Modal -->
    <div class="modal" id="approvalModal">
        <div class="modal-content small-modal-content">
            <div class="modal-header">
                <h3>Approve Idea</h3>
                <button class="modal-close" id="closeApprovalModal">&times;</button>
            </div>
            <div class="modal-body">
                <p>Are you sure you want to approve this idea?</p>
                <div id="approvalIdeaTitle" style="font-weight: bold; margin: 1rem 0; color: var(--accent-primary);"></div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn-secondary" id="cancelApproval">Cancel</button>
                <button type="button" class="btn-primary" id="confirmApproval">Approve</button>
            </div>
        </div>
    </div>

    <!-- Rejection Modal -->
    <div class="modal" id="rejectionModal">
        <div class="modal-content small-modal-content">
            <div class="modal-header">
                <h3>Reject Idea</h3>
                <button class="modal-close" id="closeRejectionModal">&times;</button>
            </div>
            <div class="modal-body">
                <div id="rejectionIdeaTitle" style="font-weight: bold; margin-bottom: 1rem; color: var(--accent-primary);"></div>
                <div class="form-group">
                    <label for="rejectionReason">Rejection Reason:</label>
                    <textarea id="rejectionReason" rows="4" placeholder="Please provide a reason for rejection..." required></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn-secondary" id="cancelRejection">Cancel</button>
                <button type="button" class="btn-primary" id="confirmRejection">Reject</button>
            </div>
        </div>
    </div>

    <!-- Similarity Check Modal -->
    <div class="modal" id="similarityModal">
        <div class="modal-content large-modal-content">
            <div class="modal-header">
                <h3>Similarity Analysis</h3>
                <button class="modal-close" id="closeSimilarityModal">&times;</button>
            </div>
            <div class="modal-body">
                <div id="similarityResults" class="similarity-results">
                    <!-- Results will be populated here -->
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn-secondary" id="closeSimilarityBtn">Close</button>
            </div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Loading Spinner -->
    <div class="loading-overlay" id="loadingOverlay" style="display: none;">
        <div class="spinner"></div>
    </div>

    <script src="script.js"></script>
</body>
</html>
